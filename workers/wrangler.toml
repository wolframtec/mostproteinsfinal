name = "mostproteins-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "mostproteins-db"
database_id = "d562328f-a378-4477-a89c-935d07664726"

# Environment variables (non-sensitive)
[vars]
NODE_ENV = "production"
ALLOWED_ORIGINS = "https://mostproteins.com,https://www.mostproteins.com,https://*.pages.dev,https://*.justbreatheaire.workers.dev"

# Secrets (set via: wrangler secret put STRIPE_SECRET_KEY)
# STRIPE_SECRET_KEY
# STRIPE_WEBHOOK_SECRET

# Enable Node.js compatibility for Stripe
[build]
command = "npm install"

# Logging
[observability]
enabled = true
head_sampling_rate = 1.0
